<HTML>
    <HEAD>
      <TITLE>Es 1 JQuery</TITLE>
      <style>
        body { 
          background-color: rgb(255,255,150); 
          color: rgb(0,0,150); 
        }
        
        .miediv { 
          background-color: rgb(0,0,150); 
          color: rgb(255,255,255); 
          font-size: 20px; 
          width: 30px;
          height: 30px;
          position: absolute;
        }
      </style>
      
      <SCRIPT src="js/jquery-1.7.2.min.js" ></SCRIPT>
      <SCRIPT src="js/jquery-ui-1.8.21.custom.min.js" ></SCRIPT>
    </HEAD>
    
    <BODY>
      <div class="miediv" id="d0" style="top: 10px; left: 10px;"></div>
      <div class="miediv" id="d1" style="top: 10px; left: 50px;"></div>
      <div class="miediv" id="d2" style="top: 10px; left: 90px;"></div>
      <div class="miediv" id="d3" style="top: 10px; left: 130px;"></div>
      <div class="miediv" id="d4" style="top: 10px; left: 170px;"></div>
      
      <SCRIPT type="text/javascript">
        $(document).ready(function() {
          var divs = $(".miediv");
          
          divs.each(function(index) {
            var div = $(this);
            var top = 10;
            var direction = 1; // 1 = down, -1 = up
            var speed = 100; // animation speed in ms
            var steps = 0;
            var maxSteps = 19; // 19 passaggi per raggiungere 200px
            var goingDown = true;
            var completed = false;
            
            div.click(function() {
              if (!completed) {
                if (goingDown) {
                  if (steps < maxSteps) {
                    top += 10;
                    steps++;
                  } else {
                    goingDown = false;
                  }
                } else {
                  if (steps > 0) {
                    top -= 10;
                    steps--;
                    if (steps === 0) {
                      completed = true;
                      div.css("background-color", "red");
                      divs.off("click");
                    }
                  } else {
                    goingDown = true;
                  }
                }
                div.animate({ top: top }, speed);
              }
            });
          });
        });
      </SCRIPT>
    </BODY>
  </HTML>
